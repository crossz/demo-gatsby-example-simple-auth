{"version":3,"file":"component---src-pages-app-js-0c6966f51f73fbc107f1.js","mappings":"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","sources":["webpack://gatsby-demo-simple-auth/./src/components/Status/status.module.css","webpack://gatsby-demo-simple-auth/./src/components/Status/index.js","webpack://gatsby-demo-simple-auth/./src/components/Profile.js","webpack://gatsby-demo-simple-auth/./src/components/Details.js","webpack://gatsby-demo-simple-auth/./src/components/Form/form.module.css","webpack://gatsby-demo-simple-auth/./src/components/Form/index.js","webpack://gatsby-demo-simple-auth/./src/components/Login.js","webpack://gatsby-demo-simple-auth/./src/components/PrivateRoute.js","webpack://gatsby-demo-simple-auth/./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://gatsby-demo-simple-auth/./src/pages/app/[...].js","webpack://gatsby-demo-simple-auth/./src/utils/auth.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport var status = \"status-module--status--4A7TW\";\nexport var status__text = \"status-module--status__text--nWF1F\";","import React from \"react\"\n// import { Link, navigate } from \"@reach/router\"\nimport { navigate } from \"@reach/router\"\nimport { Link } from \"gatsby\"\nimport { getCurrentUser, isLoggedIn, logout } from \"../../utils/auth\"\nimport { status, status__text } from \"./status.module.css\"\n\nconst Status = () => {\n  let details\n  if (!isLoggedIn()) {\n    details = (\n      <p className={status__text}>\n        To get the full app experience, you’ll need to\n        {` `}\n        <Link to=\"/app/login\">log in</Link>.\n      </p>\n    )\n  } else {\n    const { name, email } = getCurrentUser()\n\n    details = (\n      <p className={status__text}>\n        Logged in as {name} ({email}\n        )!\n        {` `}\n        <a\n          href=\"/\"\n          onClick={event => {\n            event.preventDefault()\n            logout(() => navigate(`/app/login`))\n          }}\n        >\n          log out\n        </a>\n      </p>\n    )\n  }\n\n  return <div className={status}>{details}</div>\n}\n\nexport default Status","import React from \"react\"\nimport View from \"./View\"\nimport { getCurrentUser } from \"../utils/auth\"\n\nconst Profile = () => {\n  const { name } = getCurrentUser()\n\n  return (\n    <View title=\"Your Profile\">\n      <p>Welcome back to your profile, {name}!</p>\n      <p>\n        This is a client-only route. You could set up a form to save information\n        about a user here.\n      </p>\n    </View>\n  )\n}\n\nexport default Profile\n","import React from \"react\"\nimport View from \"./View\"\nimport { getCurrentUser } from \"../utils/auth\"\n\nconst Details = () => {\n  const { name, legalName, email } = getCurrentUser()\n\n  return (\n    <View title=\"Your Details\">\n      <p>\n        This is a client-only route. You can get additional information about a\n        user on the client from this page.\n      </p>\n      <ul>\n        <li>Preferred name: {name}</li>\n        <li>Legal name: {legalName}</li>\n        <li>Email address: {email}</li>\n      </ul>\n    </View>\n  )\n}\n\nexport default Details\n","// extracted by mini-css-extract-plugin\nexport var form = \"form-module--form--HtUmr\";\nexport var form__button = \"form-module--form__button--9LLrx\";\nexport var form__input = \"form-module--form__input--9agtJ\";\nexport var form__label = \"form-module--form__label--H925z\";","import React from \"react\"\nimport { form, form__label, form__input, form__button } from \"./form.module.css\"\nimport { navigate } from \"@reach/router\"\n\nconst Form = ({ handleSubmit, handleUpdate }) => (\n  <form\n    className={form}\n    method=\"post\"\n    onSubmit={event => {\n      handleSubmit(event)\n      navigate(`/app/profile`)\n    }}\n  >\n    <p>\n      For this demo, please log in with the username <code>gatsby</code> and the\n      password <code>demo</code>.\n    </p>\n    <label className={form__label}>\n      Username\n      <input\n        className={form__input}\n        type=\"text\"\n        name=\"username\"\n        onChange={handleUpdate}\n      />\n    </label>\n    <label className={form__label}>\n      Password\n      <input\n        className={form__input}\n        type=\"password\"\n        name=\"password\"\n        onChange={handleUpdate}\n      />\n    </label>\n    <input className={form__button} type=\"submit\" value=\"Log In\" />\n  </form>\n)\n\nexport default Form","import React, { useState } from \"react\"\nimport { navigate } from \"gatsby\"\nimport Form from \"./Form\"\nimport View from \"./View\"\nimport { handleLogin, isLoggedIn } from \"../utils/auth\"\n\n// class Login extends React.Component {\n//   state = {\n//     username: ``,\n//     password: ``,\n//   }\n\n//   handleUpdate(event) {\n//     this.setState({\n//       [event.target.name]: event.target.value,\n//     })\n//   }\n\n//   handleSubmit(event) {\n//     event.preventDefault()\n//     handleLogin(this.state)\n//   }\n\n//   render() {\n//     if (isLoggedIn()) {\n//       navigate(`/app/profile`)\n//     }\n\n//     return (\n//       <View title=\"Log In\">\n//         <Form\n//           handleUpdate={e => this.handleUpdate(e)}\n//           handleSubmit={e => this.handleSubmit(e)}\n//         />\n//       </View>\n//     )\n//   }\n// }\n\n\n// // function component CAN NOT fix the issue about \"Gatsby.js development 404 page\"\nconst Login = () => {\n    const [state, setState] = useState({ 'username': '', 'password': '' })\n\n    const handleUpdate = (event) => {\n        setState({\n            ...state,\n            [event.target.name]: event.target.value,\n        })\n    }\n\n    const handleSubmit = (event) => {\n        event.preventDefault()\n        handleLogin(state)\n    }\n\n    if (isLoggedIn()) {\n        navigate(`/app/profile`)\n    }\n\n    return (\n        <View title=\"Log In\">\n            <Form\n                handleUpdate={e => handleUpdate(e)}\n                handleSubmit={e => handleSubmit(e)}\n            />\n        </View>\n    )\n}\n\nexport default Login\n","// import React from \"react\"\n// import PropTypes from \"prop-types\"\n// import { navigate } from \"gatsby\"\n// import { isLoggedIn } from \"../utils/auth\"\n\n// const PrivateRoute = ({ component: Component, location, ...rest }) => {\n//   if (!isLoggedIn() && location.pathname !== `/app/login`) {\n//     // If we’re not logged in, redirect to the home page.\n//     navigate(`/app/login`)\n//     return null\n//   }\n\n//   return <Component {...rest} />\n// }\n\n// PrivateRoute.propTypes = {\n//   component: PropTypes.any.isRequired,\n// }\n\n// export default PrivateRoute\n\nimport React from \"react\"\nimport { navigate } from \"gatsby\"\n// import { isLoggedIn } from \"../services/auth\"\nimport { isLoggedIn } from \"../utils/auth\"\n\nconst PrivateRoute = ({ component: Component, location, ...rest }) => {\n  if (!isLoggedIn() && location.pathname !== `/app/login`) {\n    navigate(\"/app/login\")\n    return null\n  }\n\n  return <Component {...rest} />\n}\n\nexport default PrivateRoute","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import React from \"react\"\nimport { Router } from \"@reach/router\"\nimport Layout from \"../../components/Layout\"\nimport Profile from \"../../components/Profile\"\nimport Details from \"../../components/Details\"\nimport Login from \"../../components/Login\"\nimport PrivateRoute from \"../../components/PrivateRoute\"\nimport Status from \"../../components/Status\"\n\nconst App = () => (\n  <Layout>\n    <Status />\n    <Router>\n      <PrivateRoute path=\"/app/details\" component={Details} />\n      <PrivateRoute path=\"/app/profile\" component={Profile} />\n      <Login path=\"/app/login\" />\n    </Router>\n  </Layout>\n)\n\nexport default App\n","const isBrowser = typeof window !== `undefined`\n\nconst getUser = () =>\n  window.localStorage.gatsbyUser\n    ? JSON.parse(window.localStorage.gatsbyUser)\n    : {}\n\nconst setUser = user => (window.localStorage.gatsbyUser = JSON.stringify(user))\n\nexport const handleLogin = ({ username, password }) => {\n  if (!isBrowser) return false\n\n  if (username === `gatsby` && password === `demo`) {\n    console.log(`Credentials match! Setting the active user.`)\n    return setUser({\n      name: `Jim`,\n      legalName: `James K. User`,\n      email: `jim@example.org`,\n    })\n  }\n\n  return false\n}\n\nexport const isLoggedIn = () => {\n  if (!isBrowser) return false\n\n  const user = getUser()\n\n  return !!user.email\n}\n\nexport const getCurrentUser = () => isBrowser && getUser()\n\nexport const logout = callback => {\n  if (!isBrowser) return\n\n  console.log(`Ensuring the \\`gatsbyUser\\` property exists.`)\n  setUser({})\n  callback()\n}\n"],"names":["status__text","details","isLoggedIn","getCurrentUser","name","email","className","href","onClick","event","preventDefault","logout","navigate","to","View","title","legalName","form__input","form__label","handleSubmit","handleUpdate","method","onSubmit","type","onChange","value","useState","state","setState","e","target","handleLogin","Component","component","location","rest","source","excluded","key","i","sourceKeys","Object","keys","length","indexOf","pathname","Layout","Status","Router","path","Details","Profile","isBrowser","window","getUser","localStorage","gatsbyUser","JSON","parse","setUser","user","stringify","username","password","console","log","callback"],"sourceRoot":""}